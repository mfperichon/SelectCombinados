<!doctype html>
<html lang="es">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>COMBOS DEPENDIENTES. De Haberlo sabido antes - Ejemplo</title>

	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<meta name="description" content="Este ejemplo muestra como funcionan dos selectores combinados. Segun el valor que selecciones en la primera lista, se completa la segunda lista con valores relacionados"/>
	<meta name="author" content="Federico Perichon" />
	<meta name="copyright" content="federicoperichon.com.ar" />

	<!-- Incluir la librería jQuery -->
	<script src="https://code.jquery.com/jquery-3.6.0.js"></script>

	<!-- Cargar Bootstrap para los estilos -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
</head>

<body>

	<div class='container-sm'>
        <h3 class='box-title'>Ejemplo de combos dependientes</h3>
        <form id='form1' name='form1' method='post' action=''>
            <div class='box-body'>
                <div class="mb-3">
			        <label for="pais">Paises:</label>
			        <select name="pais" id="pais" class="form-select" required>
			            <option value="">Seleccione...</option>
			            <option value="1">Argentina</option>
			            <option value="2">España</option>
			            <option value="3">Mexico</option>
			        </select>
			    </div>
			    <div class="mb-3">
			        <label for="ciudad">Ciudades:</label>
			        <select name="ciudad" id="ciudad" class="form-select"></select>
			    </div>
            </div>

            <div class='mb-3'>
                <input type='submit' class='btn btn-success' value='Enviar'>                      
            </div>
        </form>
	</div>


<!--
Llamada al evento Change del selector Países
Se dispara cada vez que seleccionamos un Pais de la lista
Llama al archivo buscarciudades.php y le pasa el id del pais seleccionado
Recibe la lista de ciudades y las muestra en el combo "ciudad"
-->
<script language="javascript">
$(document).ready(function(){
    $("#pais").on('change', function () {
        $("#pais option:selected").each(function () {
            paiselegido=$(this).val();
            $.post("buscarciudades.php", { paiselegido: paiselegido }, function(data){
                $("#ciudad").html(data);
            });			
        });
   });
});
</script>

</body>
</html>